@{
    ViewBag.Title = "Conta Febraban Upload";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

<script src="~/Scripts/vendor/ng-file-upload-shim.min.js"></script>
<script src="~/Scripts/vendor/ng-file-upload.min.js"></script>
<script src="~/Scripts/vendor/ui-bootstrap-tpls-1.3.2.min.js"></script>
<script src="~/Areas/File/App/Upload/app.js"></script>
<script src="~/Areas/File/App/Upload/file-upload.controller.js"></script>
<script src="~/Areas/File/App/Upload/file-upload.filter.js"></script>
<script src="~/Areas/File/App/Upload/file-upload-modal.service.js"></script>

<link href="~/Content/Site.css" rel="stylesheet" />

<div class="container" ng-app="fileUpload" ng-cloack>
    <div class="page-header text-center">
        <h1 class="noselect">Conta Febraban Parser</h1>
    </div>

    <div class="col-md-12" ng-controller="FileUploadController as vm">

        <form name="frmUpload">

            <fieldset class="form-group">

                <button type="button" class="btn btn-default" name="file"
                        ngf-select="vm.selected($files, $invalidFiles)"
                        ngf-multiple="true"
                        ngf-pattern=".txt"
                        ng-model="validation"
                        ngf-max-files="20"
                        ng-disabled="vm.uploading">
                    Clique aqui para selecionar os arquivos
                </button>
            </fieldset>
            <em class="text-muted">* Limite de 20 arquivos</em>

            <div class="alert alert-danger" ng-if="frmUpload.file.$error.pattern">O formato dos aquivos deve ser .txt</div>

            <fieldset class="form-group">
                <button type="button" class="btn btn-success pull-right" ng-if="vm.files.length > 0" ng-disabled="vm.disableUpload" ng-click="vm.upload()">Upload</button>
            </fieldset>

            <fieldset class="form-group">

                <div class="panel panel-default" ng-if="vm.files.length > 0">
                    <div class="panel-heading">Arquivos <small>({{vm.files.length}})</small></div>

                    <!-- List group -->
                    <ul class="list-group">
                        <li class="list-group-item" ng-repeat="file in vm.files"
                            ng-class="{'list-group-item-success':!file.loading && file.success, 'list-group-item-danger':!file.loading && !file.success && file.error}">

                            <div class="row">
                                <div class="col-md-10">
                                    <span>{{file.name}} - <small>{{file.size | bytes}}</small></span>
                                </div>

                                <div class="col-md-2">

                                    <button ng-if="false" type="button" class="close" aria-label="Close" ng-click="vm.remove(file)"><span aria-hidden="true">&times;</span></button>

                                    <div class="progress no-margin-bottom" ng-if="file.loading">
                                        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                            <span class="sr-only">Aguarde...</span>
                                        </div>
                                    </div>

                                    <span class="glyphicon glyphicon-thumbs-up pull-right" aria-hidden="true" ng-if="!file.loading && file.success"></span>
                                    <span class="glyphicon glyphicon-thumbs-down pull-right" aria-hidden="true" ng-if="!file.loading && !file.success && file.error"></span>

                                </div>
                            </div>
                        </li>
                    </ul>

                </div>

            </fieldset>

        </form>

        <div class="panel panel-success" ng-if="vm.listSuccessShowed && vm.sucessFiles.length > 0">
            <div class="panel-heading">Lista de Arquivos enviados <small>({{vm.sucessFiles.length}})</small></div>

            <ul class="list-group">
                <li class="list-group-item list-group-item-success" ng-repeat="file in vm.sucessFiles">

                    <div class="row">
                        <div class="col-md-10">
                            <span>{{file.name}} - <small>{{file.size | bytes}}</small></span>
                        </div>

                        <div class="col-md-2">
                            <span class="glyphicon glyphicon-thumbs-up pull-right" aria-hidden="true"></span>
                        </div>

                    </div>
                </li>
            </ul>

        </div>

    </div>
</div>
